<p>A Microsoft SQL database consists a primary data file (mdf) a secondary data file (ndf) and a transaction log file (ldf). For this article, we will concern ourselves with the mdf and ldf files.</p>
<blockquote><p><em>MDF stands for Main Database File and contains all the information in a database. LDF records all the transactions and changes to the database. The ldf is critical for disaster recovery.</em></p></blockquote>
<p>Setting the Initial size and Auto growth for these files, can have a significant  impact on the performance or even the ability to use the database. Which in turn impacts the use pf the PDM vault, relying on this database.</p>
<blockquote><p><strong>WARNING: Any changes should be done by someone knowledgeable of Microsoft SQL.</strong></p></blockquote>
<p>The mdf and ldf  can be set for each Microsoft SQL database, by right-clicking on the database, in Microsoft SQL Server Management Studio and selecting Properties.</p>
<p><div id="attachment_46123" style="width: 348px" class="wp-caption aligncenter"><img decoding="async" aria-describedby="caption-attachment-46123" class="wp-image-46123 size-full lazyload" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/Database-Properties.png" alt="" width="338" height="509" title=""><p id="caption-attachment-46123" class="wp-caption-text"><noscript><img decoding="async" class="wp-image-46123 size-full lazyload" src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/Database-Properties.png" alt="" width="338" height="509" title=""></noscript> Accessing Database Properties</p></div></p>
<p>In the Database Properties Select Files.</p>
<p><div id="attachment_46125" style="width: 191px" class="wp-caption aligncenter"><img decoding="async" aria-describedby="caption-attachment-46125" class="wp-image-46125 size-full lazyload" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-31-10.png" alt="" width="181" height="207" title=""><p id="caption-attachment-46125" class="wp-caption-text"><noscript><img decoding="async" class="wp-image-46125 size-full lazyload" src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-31-10.png" alt="" width="181" height="207" title=""></noscript> Database Properties Files</p></div></p>
<p>In this window, the current settings for the mdf and ldf are displayed.</p>
<p><div id="attachment_46128" style="width: 1252px" class="wp-caption aligncenter"><img decoding="async" aria-describedby="caption-attachment-46128" class="wp-image-46128 size-full lazyload" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-43-09.png" alt="" width="1242" height="255" title=""><p id="caption-attachment-46128" class="wp-caption-text"><noscript><img decoding="async" class="wp-image-46128 size-full lazyload" src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-43-09.png" alt="" width="1242" height="255" title="" srcset="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-43-09.png 1242w, https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-43-09-600x123.png 600w, https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-43-09-1220x250.png 1220w, https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-43-09-768x158.png 768w" sizes="(max-width: 1242px) 100vw, 1242px" /></noscript> MDF LDF Settings</p></div></p>
<p>The default initial size for both files are 8 MB. The initial size is not as important as Autogrowth. And even for Autogrowth, there are no suggested values. SOLIDWORKS in the past has recommended 15% for the mdf and 10% for ldf as initial settings.</p>
<p><div id="attachment_46129" style="width: 646px" class="wp-caption aligncenter"><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-46-24.png"><img decoding="async" aria-describedby="caption-attachment-46129" class="wp-image-46129 size-full lazyload" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-46-24.png" alt="Change Autogrowth" width="636" height="395" title=""><p id="caption-attachment-46129" class="wp-caption-text"><noscript><img decoding="async" class="wp-image-46129 size-full lazyload" src="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-46-24.png" alt="Change Autogrowth" width="636" height="395" title="" srcset="https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-46-24.png 636w, https://www.javelin-tech.com/blog/wp-content/uploads/2020/04/08-04-2020-02-46-24-600x373.png 600w" sizes="(max-width: 636px) 100vw, 636px" /></noscript></a> Change Autogrowth</p></div></p>
<h3>Setting Autogrowth and Maximum File Size</h3>
<p>These settings may need tweaking if you experience poor performance. Microsoft has published an article on &#8220;<a href="https://support.microsoft.com/en-ca/help/315512/considerations-for-the-autogrow-and-autoshrink-settings-in-sql-server" rel="nofollow noopener" target="_blank">Considerations for the &#8220;autogrow&#8221; and &#8220;autoshrink&#8221; settings in SQL Server</a>&#8220;, that can be helpful in determining the Autogrowth size. Autoshrink should not be used, as this can cause Index fragmentation, which can then lead to poor performance.</p>
<p>The Maximum File Size for the mdf, is set to Unlimited, bby default. For a Microsoft SQL Standard implementation, the maximum mdf size is 10 GB. Few PDM databases will ever reach that size. Since the mdf contains everything you add to your database, setting a Maximum Size, will also add a ceiling to what can added in PDM. I would suggest NOT capping the Maximum File Size for the mdf. If you are running out of space on your SQL server, consider adding a larger drive or having a server that is dedicated to running SQL. A dedicated Database (SQL) and Archive sever, can provide superior performance.</p>
<p>By Default Maximum File Size for the ldf is capped. If the <a href="https://www.javelin-tech.com/blog/2020/03/solidworks-pdm-database-recovery-model/">Simple Recovery Model</a> is used, this file should not grow to quickly. The Maximum File Size can be adjusted if this cap is reached. There will be indicators in the PDM user log that indicate that the Transaction log is full and this could in turn mean that the cap has been reached. As a note these messages can also be indicative of a full drive.</p>
