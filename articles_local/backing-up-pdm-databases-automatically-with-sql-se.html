<p>Proper backups are an essential part of data management.  For SOLIDWORKS PDM, there are two key elements that must be backed up to ensure that data is safe, the <strong>vault archives</strong>, and the <strong>vault database</strong>.</p>
<p>The vault archives are copies of the actual files stored in the vault.  They are organized in folders managed by the Archive Server.</p>
<p>The vault database contains all the information about those files, the history, the variable values as well as the Vault settings.</p>
<p>With SOLIDWORKS PDM Professional, the database is typically hosted on Microsoft SQL Standard or Enterprise, which include the <strong><em>SQL Server Agent</em> </strong>service.  This service can be used to automatically create a .bak file backup of the PDM database based on a schedule set up in a maintenance plan.</p>
<p>Please Note:  SOLIDWORKS PDM Standard vaults must be hosted on Microsoft SQL Express, which does not include the SQL Server Agent.  PDM Standard databases must be backed up using a different method.</p>
<p>The backups for the SQL database and of the Archive Folders should be as synchronous as possible so the schedule in the maintenance plan should be set up to closely align with the Archive backups.  These backups should be performed <em><strong>daily</strong></em>.  The sql maintenance plan should include two tasks, the backup file creation, and the backup file cleanup which will delete older backup files after a certain number of days.</p>
<p>As with the Archive Folder backups, it is highly recommended that the SQL database backups be copied from the server to an external backup drive each night.</p>
<h2>Creating an SQL Maintenance Plan for Database Backups</h2>
<p><strong>Step 1</strong>:  Ensure that the <em>SQL Server Agent</em> service is running.  Launch the <em>SQL Server Configuration Manager</em> program and verify that the<em> SQL Server Agent</em> is currently running. If it is not, right click the Agent and click <em><strong>Start</strong></em>.</p>
<div class="wp-caption aligncenter" id="attachment_13997" style="width: 1032px"><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/01/SQL-Server-Agent.png"><img alt="Start SQL Server Agent" aria-describedby="caption-attachment-13997" height="467" src="/assets/images/SQL-Server-Agent.png" title="" width="1022"/><p class="wp-caption-text" id="caption-attachment-13997"><noscript><img alt="Start SQL Server Agent" height="467" sizes="(max-width: 1022px) 100vw, 1022px" src="/assets/images/SQL-Server-Agent.png" title="" width="1022"/></noscript></p></a> Step 1 – Start SQL Server Agent</div>
<p><strong>Step 2</strong>:  Launch the Microsoft SQL Server Management Studio and log into the instance hosting the vault database(s).</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/1-Login.jpg"><img alt="" height="744" src="/assets/images/1-Login.jpg" title="" width="1301"/><noscript><img alt="" height="744" sizes="(max-width: 1301px) 100vw, 1301px" src="/assets/images/1-Login.jpg" title="" width="1301"/></noscript></a></p>
<p><strong>Step 3:</strong>  Expand the <em>Management</em> folder in the Object Explorer then right click on the <em>Maintenance Plans</em> folder and select the <em><strong>Maintenance Plan Wizard</strong></em> command.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/Maintanence-Plan.png"><img alt="" height="734" src="/assets/images/Maintanence-Plan.png" title="" width="1291"/><noscript><img alt="" height="734" sizes="(max-width: 1291px) 100vw, 1291px" src="/assets/images/Maintanence-Plan.png" title="" width="1291"/></noscript></a></p>
<p><strong>Step 4</strong>:  When the Wizard launches the starting page explains further what functions can be automated using the Maintenance Plan.  We will focus here on performing database backups.  Click <strong>Next</strong> to proceed.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/3-Wizard.jpg"><img alt="" height="463" src="/assets/images/3-Wizard.jpg" title="" width="575"/><noscript><img alt="" height="463" src="/assets/images/3-Wizard.jpg" title="" width="575"/></noscript></a></p>
<p><strong>Step 5</strong>:  On the <em>Plan Properties</em> scree, set a name for the maintenance plan, and ensue that the plan is set to <em>Single schedule for the entire plan or no schedule</em>. Click <em><strong>Change</strong> </em>to set the schedule for the plan.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/4-Plan-Name.jpg"><img alt="" height="470" src="/assets/images/4-Plan-Name.jpg" title="" width="591"/><noscript><img alt="" height="470" src="/assets/images/4-Plan-Name.jpg" title="" width="591"/></noscript></a><strong>Step 6:</strong>  On the <em>Job Schedule</em> screen, we highly recommend that the backups be scheduled to run <em>Daily</em>.  Make sure that you give the Maintenance Plan enough time to complete the backup in advance of any scheduled hard disk backup you may have already set up.  Click <strong>OK</strong> to set the schedule.  Back on the <em>Plan Properties</em> screen click <em><strong>Next</strong></em> to continue.<a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/5-Schedule.jpg"><img alt="" height="600" src="/assets/images/5-Schedule.jpg" title="" width="681"/><noscript><img alt="" height="600" sizes="(max-width: 681px) 100vw, 681px" src="/assets/images/5-Schedule.jpg" title="" width="681"/></noscript></a></p>
<p><strong>Step 7:</strong>  On the <em>Select Maintenance Tasks</em> screen, check the box to select the<em><strong> Back Up Database (Full)</strong></em> task, and the <em><strong>Maintenance Cleanup Task</strong></em>. Then click <em><strong>Next</strong></em> to continue.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/6-Tasks.jpg"><img alt="" height="471" src="/assets/images/6-Tasks.jpg" title="" width="577"/><noscript><img alt="" height="471" src="/assets/images/6-Tasks.jpg" title="" width="577"/></noscript></a></p>
<p><strong>Step 8:</strong>  On the <em>Task Order</em> screen the default order should be maintained. Click <em><strong>Next</strong></em> to continue.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/7-Task-Order.jpg"><img alt="" height="462" src="/assets/images/7-Task-Order.jpg" title="" width="581"/><noscript><img alt="" height="462" src="/assets/images/7-Task-Order.jpg" title="" width="581"/></noscript></a></p>
<p><strong>Step 9:</strong>  On the <em>Define Task</em> screen for the Backup task, first, select the <em>Databases</em> to be backed up.  Ensure that the SOLIDWORKS PDM Vault database(s) and the <em><strong>ConisioMasterDb</strong></em> are checked.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/8a-Select-Databases.jpg"><img alt="" height="627" src="/assets/images/8a-Select-Databases.jpg" title="" width="610"/><noscript><img alt="" height="627" sizes="(max-width: 610px) 100vw, 610px" src="/assets/images/8a-Select-Databases.jpg" title="" width="610"/></noscript></a></p>
<p><strong>Step 10:</strong>  Switch to the <strong><em>Destination</em> </strong>tab and set the folder path where the backup files should be created.  Ensure that the backup extension is set to <em><strong>bak </strong></em>(<span style="text-decoration: underline;">do not</span> include the “.” separator) and that the task is set to<em><strong> Create a backup file for each database</strong></em>.  Click <em><strong>Next</strong> </em>to continue.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/8b-Destination.jpg"><img alt="" height="621" src="/assets/images/8b-Destination.jpg" title="" width="728"/><noscript><img alt="" height="621" sizes="(max-width: 728px) 100vw, 728px" src="/assets/images/8b-Destination.jpg" title="" width="728"/></noscript></a></p>
<p><strong>Step 11</strong>:  On the <em>Define Task</em> screen for the Maintenance Cleanup Task, set the task to delete <em><strong>Backup files</strong></em>, and specify the folder path where the backup files are being included. Set the file extension to <em><strong>bak</strong> </em>(<span style="text-decoration: underline;">do not</span> include the “.” separator).  Set the number of backups to keep, typically between 7 to 14 days of backups, depending on your company’s protocols. Click <em><strong>Next</strong> </em>to continue.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/9-Cleanup.jpg"><img alt="" height="705" src="/assets/images/9-Cleanup.jpg" title="" width="585"/><noscript><img alt="" height="705" sizes="(max-width: 585px) 100vw, 585px" src="/assets/images/9-Cleanup.jpg" title="" width="585"/></noscript></a></p>
<p><strong>Step 12</strong>:  On the Report screen, you have the option to set a custom path for the task report file. Click <em><strong>Next</strong></em> to continue.</p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/10-Report.jpg"><img alt="" height="463" src="/assets/images/10-Report.jpg" title="" width="575"/><noscript><img alt="" height="463" src="/assets/images/10-Report.jpg" title="" width="575"/></noscript></a><strong style="text-align: center;">Step 13</strong><span style="text-align: center;">:  Finally, review settings and click </span><em style="text-align: center;"><strong>Finish</strong> </em><span style="text-align: center;">to complete the Maintenance Plan Wizard.</span></p>
<p><a href="https://www.javelin-tech.com/blog/wp-content/uploads/2015/06/Finish.jpg"><img alt="" height="542" src="/assets/images/Finish.jpg" title="" width="725"/><noscript><img alt="" height="542" sizes="(max-width: 725px) 100vw, 725px" src="/assets/images/Finish.jpg" title="" width="725"/></noscript></a></p>
